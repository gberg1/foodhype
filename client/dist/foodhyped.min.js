function handleNoGeolocation(a){if($(document).trigger("loadedYelpData"),a)var b="Error: The Geolocation service failed.";else var b="Error: Your browser doesn't support geolocation.";({map:map,position:new google.maps.LatLng(60,105),content:b,icon:"../images/person-icon.png"})}var AppView=React.createClass({displayName:"AppView",componentDidMount:function(){$(document).on("markerClick",this.handleMarkerClick)},handleMarkerClick:function(a,b){this.setState({selectedMarkerData:b}),this.render()},getInitialState:function(){return{selectedMarkerData:{display:!1}}},render:function(){return React.createElement("div",{id:"wrapper"},React.createElement("h1",{id:"title"},"Food Hyped"),React.createElement("input",{id:"pac-input",className:"controls",type:"text",placeholder:"Start typing here"}),React.createElement(WindowView,{data:this.state.selectedMarkerData}))}}),WindowView=React.createClass({displayName:"WindowView",handleTwilioClick:function(){var a=$('<div id="twilioForm"><form method="post" action="">Enter phone number (must be registered with twilio)<br><input type="text" name="phoneNumber" id="phoneNumber"><input type="submit"></div>').hide().fadeIn(1500);$("body").append(a);var b=this.props.data.name,c=this.props.data.address,d=this.props.data.score;$("#twilioForm form").on("submit",function(a){a.preventDefault();var e=$("#phoneNumber").val();$.ajax({url:"/twilioSend",type:"POST",data:JSON.stringify({theNum:e,restName:b,restAddress:c,restScore:d}),dataType:"text",contentType:"application/json",success:function(a){$("#twilioForm").fadeOut(1e3,function(){$(this).remove()})},error:function(a){console.error(a)}})})},render:function(){if(this.props.data.display===!1)return React.createElement("div",null);var a=this.props.data.instagramPictureUrl||"http://i.imgur.com/8SoMYyh.jpg";return React.createElement("div",{id:"window",className:"animated bounceInRight"},React.createElement("div",{id:"windowTitle"},this.props.data.name),React.createElement("img",{id:"windowPicture",src:a}),React.createElement("div",null,"Its at ",this.props.data.address," "),React.createElement("div",{id:"windowScore"},this.props.data.score),React.createElement("a",{href:this.props.data.yelpUrl},React.createElement("button",{className:"linkButton",id:"yelp"})),React.createElement("a",{href:this.props.data.twitterUrl},React.createElement("button",{className:"linkButton",id:"twitter"})),React.createElement("a",{href:this.props.data.instagramUrl},React.createElement("button",{className:"linkButton",id:"instagram"})),React.createElement("a",{href:this.props.data.googlePlacesUrl},React.createElement("button",{className:"linkButton",id:"googlePlaces"})),React.createElement("a",{onClick:this.handleTwilioClick},React.createElement("button",{className:"linkButton",id:"twilio"})))}});React.render(React.createElement(AppView,null),document.getElementById("AppView"));var map,markers=[],myLatLng=new google.maps.LatLng(37.77493,-122.41942),mapOptions={center:myLatLng,zoom:14};map=new google.maps.Map(document.getElementById("map-canvas"),mapOptions);var defaultBounds=new google.maps.LatLngBounds(new google.maps.LatLng(-90,-180),new google.maps.LatLng(90,180)),options={bounds:defaultBounds},input=document.getElementById("pac-input"),autocomplete=new google.maps.places.Autocomplete(input,options);map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);var infowindow=new google.maps.InfoWindow,searchBox=new google.maps.places.SearchBox(input);google.maps.event.addListener(searchBox,"places_changed",function(){var a=searchBox.getPlaces();if(0!==a.length){for(var b,c=0;b=markers[c];c++)b.setMap(null);markers=[];for(var d,e=new google.maps.LatLngBounds,c=0;d=a[c];c++){var f={url:d.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};markers[c]=new google.maps.Marker({map:map,icon:f,title:d.name,position:d.geometry.location}),markers.push(b),e.extend(d.geometry.location)}map.fitBounds(e)}}),google.maps.event.addListener(map,"bounds_changed",function(){var a=map.getBounds();searchBox.setBounds(a)}),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);map.setCenter(b),window.user=new google.maps.Marker({map:map,draggable:!0,animation:google.maps.Animation.DROP,position:b,icon:"../images/person-icon.png"}),google.maps.event.addListener(user,"click",userClickHandler),getRestaurants()},function(){handleNoGeolocation(!0)}):handleNoGeolocation(!1);var userClickHandler=function(){null!=window.user.getAnimation()?window.user.setAnimation(null):window.user.setAnimation(google.maps.Animation.BOUNCE)},getRestaurants=function(){window.markers=[];var a={userLat:window.user.position.G.toString(),userLong:window.user.position.K.toString()};$.ajax({type:"POST",url:"/yelpresults",dataType:"text",contentType:"application/json",data:JSON.stringify(a)}).done(function(a){a=JSON.parse(a);for(var c=function(c){var d=new google.maps.Marker({map:map,position:new google.maps.LatLng(a[c].latitude,a[c].longitude),animation:google.maps.Animation.DROP,icon:"../images/ball-marker.png"});d.data=a[c],window.markers.push(d),google.maps.event.addListener(window.markers[c],"click",b)},d=0;d<a.length;d++)c(d);var e=document.getElementById("loadingWall");e.parentNode.removeChild(e)}.bind(this));var b=function(a){for(var b=0;b<window.markers.length;b++)a.latLng===window.markers[b].getPosition()&&$(document).trigger("markerClick",[window.markers[b].data])}};